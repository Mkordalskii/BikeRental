<UserControl x:Class="BikeRental.Views.RaportWypozyczenView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:BikeRental.Views"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Background="White" Width="600" HorizontalAlignment="Left">
        <!-- Ważne: BindingGroup pozwala wymusić UpdateSources (gdybyś chciał w code-behind),
             i ogólnie stabilizuje formularz przy zapisie/eksportach -->
        <Grid.BindingGroup>
            <BindingGroup/>
        </Grid.BindingGroup>

        <Grid.RowDefinitions>
            <RowDefinition Height="33"/>
            <RowDefinition Height="33"/>
            <RowDefinition Height="33"/>
            <RowDefinition Height="33"/>
            <RowDefinition Height="33"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="33"/>
            <!-- opcjonalnie: ścieżka PDF -->
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Content="Podsumowanie wypożyczeń w wybranym okresie" HorizontalContentAlignment="Center"/>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="40"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="40"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Grid.Column="0" Content="Od" Margin="3" HorizontalContentAlignment="Center"/>
            <DatePicker Grid.Column="1" Margin="3"
                        SelectedDate="{Binding DataOd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <Label Grid.Column="2" Content="Do" Margin="3" HorizontalContentAlignment="Center"/>
            <DatePicker Grid.Column="3" Margin="3"
                        SelectedDate="{Binding DataDo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="60"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="Klient" Margin="3"/>
            <ComboBox Grid.Column="1" Margin="3"
                      ItemsSource="{Binding KlienciComboBoxItems}"
                      DisplayMemberPath="Value"
                      SelectedValuePath="Key"
                      SelectedValue="{Binding IdKlienta, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Grid.Column="0" Content="Stacja start" Margin="3"/>
            <ComboBox Grid.Column="1" Margin="3"
                      ItemsSource="{Binding StacjeComboBoxItems}"
                      DisplayMemberPath="Value"
                      SelectedValuePath="Key"
                      SelectedValue="{Binding IdStacjaStart, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <Label Grid.Column="2" Content="Stacja koniec" Margin="3"/>
            <ComboBox Grid.Column="3" Margin="3"
                      ItemsSource="{Binding StacjeComboBoxItems}"
                      DisplayMemberPath="Value"
                      SelectedValuePath="Key"
                      SelectedValue="{Binding IdStacjaKoniec, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="Rower" Margin="3"/>
            <ComboBox Grid.Column="1" Margin="3"
                      ItemsSource="{Binding RoweryComboBoxItems}"
                      DisplayMemberPath="Value"
                      SelectedValuePath="Key"
                      SelectedValue="{Binding IdRoweru, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <UniformGrid Grid.Row="5" Columns="4" HorizontalAlignment="Stretch" VerticalAlignment="Top">
            <Border Margin="5" Padding="10" BorderBrush="Gray" BorderThickness="1" CornerRadius="5">
                <StackPanel>
                    <TextBlock Text="Liczba wypożyczeń" FontWeight="Bold"/>
                    <TextBlock Text="{Binding LiczbaWypozyczen}" FontSize="18"/>
                </StackPanel>
            </Border>

            <Border Margin="5" Padding="10" BorderBrush="Gray" BorderThickness="1" CornerRadius="5">
                <StackPanel>
                    <TextBlock Text="Łączny czas (min)" FontWeight="Bold"/>
                    <TextBlock Text="{Binding LacznyCzasMin}" FontSize="18"/>
                </StackPanel>
            </Border>

            <Border Margin="5" Padding="10" BorderBrush="Gray" BorderThickness="1" CornerRadius="5">
                <StackPanel>
                    <TextBlock Text="Łączny dystans (km)" FontWeight="Bold"/>
                    <TextBlock Text="{Binding LacznyDystansKm}" FontSize="18"/>
                </StackPanel>
            </Border>

            <Border Margin="5" Padding="10" BorderBrush="Gray" BorderThickness="1" CornerRadius="5">
                <StackPanel>
                    <TextBlock Text="Przychód (PLN)" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Przychod}" FontSize="18"/>
                </StackPanel>
            </Border>
        </UniformGrid>

        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="Generuj raport"
                    Command="{Binding GenerujRaport}"
                    Margin="3" Padding="10,3" Width="150"/>

            <Button Content="Eksportuj do PDF"
                    Command="{Binding EksportujPdf}"
                    Margin="3" Padding="10,3" Width="150"/>

            <Button Content="Wyczyść"
                    Command="{Binding Wyczysc}"
                    Margin="3" Padding="10,3" Width="100"/>
        </StackPanel>

        <!-- Opcjonalnie: pokazanie gdzie zapisano PDF -->
        <Grid Grid.Row="7" Margin="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="Ostatni PDF:" VerticalAlignment="Center"/>
            <TextBox Grid.Column="1"
                     IsReadOnly="True"
                     Text="{Binding OstatniaSciezkaPdf}"
                     VerticalContentAlignment="Center"/>
        </Grid>
    </Grid>
</UserControl>
